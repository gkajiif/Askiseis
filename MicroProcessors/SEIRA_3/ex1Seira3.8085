ORG 0800H
EQU MINUTE,3CH			


IN 10H
;ARXIKOPOIHSH
LXI H,0900H
MVI A,00H
MVI M,10H
INX H
MVI M,10H
INX H
MVI M,10H
INX H
MVI M,10H
INX H


MVI A,0DH
SIM
EI

LOOP_MAIN: JMP LOOP_MAIN

INTR_ROUTINE:

;ARXIKOPOIHSH LED
POP H
LXI H,0905H
MVI M,06H
LXI H,0904H
MVI M,00H

RST6.5:


MVI D,MINUTE

METRHSH:

MVI A,00H
STA 3000H

PUSH D

MVI B,64H

SECOND1:
PUSH B
LXI B,000AH
CALL DELB
POP B
DCR B

DI
LXI  D,0900H
CALL STDM
CALL DCD
EI
	
MOV A,B
CPI 00H				;NA ALLAXTEI
JNZ SECOND1

POP D
MOV A,D
DCR D
DCR A
MVI B,FFH
DECA:
INR B
SUI 0AH
JNC DECA
ADI 0AH
STA 0904H
MOV A,B
STA 0905H
MOV A,D

CPI 00H
JNZ METRHSH
MVI A,FFH
STA 3000H

AFTER1:				
LXI H,0905H
MVI M,10H

LXI H,0904H
MVI M,10H


LXI D,0900H			;Update the LED display with the 2 bits from the left off 
DI
CALL STDM
CALL DCD
EI
JMP AFTER1

END